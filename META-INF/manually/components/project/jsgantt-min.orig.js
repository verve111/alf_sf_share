var JSGantt;if(!JSGantt){JSGantt={}}JSGantt.PREF_GANTT_FORMAT="fr.becpg.gantt.format";(function(){JSGantt.register=function(b){JSGantt.scope=b;JSGantt.msg=function(c){return Alfresco.util.message.call(b,c,b.name,Array.prototype.slice.call(arguments).slice(1))}};JSGantt.TaskItem=function(u,w,f,d,k,s,v,q,n,K,c,B,j,t,y){var F=u;var I=w;var l=JSGantt.parseDateStr(f,g.getDateInputFormat());var x=JSGantt.parseDateStr(d,g.getDateInputFormat());var m=k;var G=y;var C=s;var H=v;var D=q;var z=n;var h=K;var b=c;var e=B;var i=j;var J=t;var E=0;var o=0;var A=1;var r=0,M=0,p=0,L=0;this.getID=function(){return F};this.getName=function(){return I};this.getStart=function(){return l};this.getEnd=function(){return H?l:x};this.getColor=function(){return m};this.getLineColor=function(){return G};this.getLink=function(){return C};this.getMile=function(){return H};this.getDepend=function(){if(i){return i}return null};this.getCaption=function(){if(J){return J}return""};this.getResource=function(){if(typeof(D)!=="undefined"&&D!==null){return D}return"&nbsp;"};this.getCompVal=function(){if(z){return z}return 0};this.getCompStr=function(){if(z){return z+"%"}return""};this.getDuration=function(P){var O=null,N=null;if(H){N="-"}else{if(P==="hour"){O=Math.ceil((this.getEnd()-this.getStart())/(60*60*1000));if(O===1){N="1 "+JSGantt.msg("jsgantt.hour")}else{N=O+" "+JSGantt.msg("jsgantt.hours")}}else{if(P==="minute"){O=Math.ceil((this.getEnd()-this.getStart())/(60*1000));if(O===1){N="1 "+JSGantt.msg("jsgantt.minute")}else{N=O+" "+JSGantt.msg("jsgantt.minutes")}}else{O=Math.ceil((this.getEnd()-this.getStart())/(24*60*60*1000)+1);if(O===1){N="1 "+JSGantt.msg("jsgantt.day")}else{N=O+" "+JSGantt.msg("jsgantt.days")}}}}return N};this.getParent=function(){return b};this.getGroup=function(){return h};this.getOpen=function(){return e};this.getLevel=function(){return E};this.getNumKids=function(){return o};this.getStartX=function(){return r};this.getStartY=function(){return M};this.getEndX=function(){return p};this.getEndY=function(){return L};this.getVisible=function(){return A};this.setDepend=function(N){i=N};this.setStart=function(N){l=N};this.setEnd=function(N){x=N};this.setLevel=function(N){E=N};this.setNumKid=function(N){o=N};this.setCompVal=function(N){z=N};this.setStartX=function(N){r=N};this.setStartY=function(N){M=N};this.setEndX=function(N){p=N};this.setEndY=function(N){L=N};this.setOpen=function(N){e=N};this.setVisible=function(N){A=N}};JSGantt.GanttChart=function(q,l,h){var m=new Alfresco.service.Preferences();var z=q;var e=l;var b="day";if(h!=null&&h.length>0){b=h}else{b=Alfresco.util.findValueByDotNotation(m.get(),JSGantt.PREF_GANTT_FORMAT);if(!b){b="day"}}var u=0;var n=1;var t=1;var o=0;var r=0;var w=1;var k=1;var s="mm/dd/yyyy";var i="mm/dd/yy";var j=0;var p="";var d=1;var c=[];var v=["day","week","month","quarter"];var f=[1,1,1,2,2,2,3,3,3,4,4,4];var x=[31,28,31,30,31,30,31,31,30,31,30,31];var y=Alfresco.util.message("months.long").split(",");this.setFormatArr=function(){v=new Array();for(var A=0;A<arguments.length;A++){v[A]=arguments[A]}if(v.length>4){v.length=4}};this.setShowRes=function(A){u=A};this.setShowDur=function(A){n=A};this.setShowSelect=function(A){w=A};this.setColWidthFactor=function(A){k=A};this.setShowComp=function(A){t=A};this.setShowStartDate=function(A){o=A};this.setShowEndDate=function(A){r=A};this.setDateInputFormat=function(A){s=A};this.setDateDisplayFormat=function(A){i=A};this.setCaptionType=function(A){p=A};this.setFormat=function(A){b=A;m.set(JSGantt.PREF_GANTT_FORMAT,A);this.Draw()};this.getFormat=function(){return b};this.getShowRes=function(){return u};this.getShowDur=function(){return n};this.getShowComp=function(){return t};this.getShowStartDate=function(){return o};this.getShowEndDate=function(){return r};this.getDateInputFormat=function(){return s};this.getDateDisplayFormat=function(){return i};this.getCaptionType=function(){return p};this.CalcTaskXY=function(){var B=this.getList();for(var A=0;A<B.length;A++){vcurrDivID=B[A].getID();vTaskDiv=document.getElementById("taskbar_"+vcurrDivID);vBarDiv=document.getElementById("bardiv_"+vcurrDivID);vParDiv=document.getElementById("childgrid_"+vcurrDivID);if(vBarDiv){B[A].setStartX(vBarDiv.offsetLeft);B[A].setStartY(vParDiv.offsetTop+vBarDiv.offsetTop+6);B[A].setEndX(vBarDiv.offsetLeft+vBarDiv.offsetWidth);B[A].setEndY(vParDiv.offsetTop+vBarDiv.offsetTop+6)}}};this.AddTaskItem=function(A){c.push(A)};this.getList=function(){return c};this.clearDependencies=function(){var D=document.getElementById("rightside");var C;var B=d;for(var A=1;A<B;A++){C=document.getElementById("line"+A);if(C){D.removeChild(C)}}d=1};this.scrollToY=function(A){if(A){var B=document.getElementById("rightside");B.scrollLeft=A}};this.sLine=function(C,E,A,D){vLeft=Math.min(C,A);vTop=Math.min(E,D);vWid=Math.abs(A-C)+1;vHgt=Math.abs(D-E)+1;vDoc=document.getElementById("rightside");var B=document.createElement("div");B.className="ggline";B.id="line"+d++;B.style.left=vLeft+"px";B.style.top=vTop+"px";B.style.width=vWid+"px";B.style.height=vHgt+"px";vDoc.appendChild(B)};this.dLine=function(B,G,A,F){var J=A-B;var I=F-G;var H=B;var E=G;var C=Math.max(Math.abs(J),Math.abs(I));J=J/C;I=I/C;for(var D=0;D<=C;D++){vx=Math.round(H);vy=Math.round(E);this.sLine(vx,vy,vx,vy);H+=J;E+=I}};this.drawDependency=function(B,D,A,C){if(B+10<A){this.sLine(B,D,B+4,D);this.sLine(B+4,D,B+4,C);this.sLine(B+4,C,A,C);this.dLine(A,C,A-3,C-3);this.dLine(A,C,A-3,C+3);this.dLine(A-1,C,A-3,C-2);this.dLine(A-1,C,A-3,C+2)}else{this.sLine(B,D,B+4,D);this.sLine(B+4,D,B+4,C-10);this.sLine(B+4,C-10,A-8,C-10);this.sLine(A-8,C-10,A-8,C);this.sLine(A-8,C,A,C);this.dLine(A,C,A-3,C-3);this.dLine(A,C,A-3,C+3);this.dLine(A-1,C,A-3,C-2);this.dLine(A-1,C,A-3,C+2)}};this.DrawDependencies=function(){this.CalcTaskXY();this.clearDependencies();var E=this.getList();for(var D=0;D<E.length;D++){vDepend=E[D].getDepend();if(vDepend){var A=vDepend+"";var G=A.split(",");var F=G.length;for(var B=0;B<F;B++){var C=this.getArrayLocationByID(G[B]);if(C!=null&&E[C].getVisible()==1&&E[D].getVisible()==1){if(E[C].getMile()){this.drawDependency(E[C].getEndX()-251,E[C].getEndY()+1,E[D].getStartX()-1,E[D].getStartY()+1)}else{this.drawDependency(E[C].getEndX()+1,E[C].getEndY()+1,E[D].getStartX()-1,E[D].getStartY()+1)}}}}}};this.getArrayLocationByID=function(B){var C=this.getList();for(var A=0;A<C.length;A++){if(C[A].getID()==B){return A}}return null};this.Draw=function(){try{var O=new Date();var ab=new Date();var E=new Date();var M=new Date();var F=new Date();var T=0;var P=0;var ad=0;var J=0;var A="";var C="";var X="";var R="";var I="";var H=0;var G=0;var Y=0;var B=0;var K=0;var Q="";if(c.length>0){JSGantt.processRows(c,0,-1,1,1);ab=JSGantt.getMinDate(c,b);O=JSGantt.getMaxDate(c,b);if(b=="day"){H=22*k;G=1}else{if(b=="week"){H=37*k;G=7}else{if(b=="month"){H=37*k;G=30}else{if(b=="quarter"){H=60*k;G=90}else{if(b=="hour"){H=22*k;G=1}else{if(b=="minute"){H=22*k;G=1}}}}}}B=(O.getTime()-ab.getTime())/(24*60*60*1000);j=B/G;Y=j*H+1;K=(H/G)+(1/G);A='<div class="yui-gd yui-dt">';C='<div class="yui-u first" id="leftside"><table cellSpacing="0" cellPadding="0" border="0"><thead>';C+='<tr class="gheader">';C+='<th  colspan="5">'+JSGantt.msg("jsgantt.format")+":&nbsp;";if(v.join().indexOf("minute")!=-1){if(b=="minute"){C+='<input type="radio" name="radFormat" value="minute" checked>'+JSGantt.msg("jsgantt.minute")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'minute\','+z+');" value="minute">'+JSGantt.msg("jsgantt.minute")}}if(v.join().indexOf("hour")!=-1){if(b=="hour"){C+='<input type="radio" name="radFormat" value="hour" checked>'+JSGantt.msg("jsgantt.hour")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'hour\','+z+');" value="hour">'+JSGantt.msg("jsgantt.hour")}}if(v.join().indexOf("day")!=-1){if(b=="day"){C+='<input type="radio" name="radFormat" value="day" checked>'+JSGantt.msg("jsgantt.day")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'day\','+z+');" value="day">'+JSGantt.msg("jsgantt.day")}}if(v.join().indexOf("week")!=-1){if(b=="week"){C+='<input type="radio" name="radFormat" value="week" checked>'+JSGantt.msg("jsgantt.week")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'week\','+z+');" value="week">'+JSGantt.msg("jsgantt.week")}}if(v.join().indexOf("month")!=-1){if(b=="month"){C+='<input type="radio" name="radFormat" value="month" checked>'+JSGantt.msg("jsgantt.month")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'month\','+z+');" value="month">'+JSGantt.msg("jsgantt.month")}}if(v.join().indexOf("quarter")!=-1){if(b=="quarter"){C+='<input type="radio" name="radFormat" value="quarter" checked>'+JSGantt.msg("jsgantt.quarter")}else{C+='<input type="radio" name="radFormat" onclick="JSGantt.changeFormat(\'quarter\','+z+');" value="quarter">'+JSGantt.msg("jsgantt.quarter")}}C+="</th></tr>";C+='<tr class="gheader"> <th colspan="2"><nobr></nobr></th>';if(u===1){C+="  <th nowrap >"+JSGantt.msg("jsgantt.resource")+"</th>"}if(n===1){C+="  <th  nowrap >"+JSGantt.msg("jsgantt.duration")+"</th>"}if(t===1){C+="  <th  nowrap >"+JSGantt.msg("jsgantt.percomp")+"</th>"}if(o===1){C+="  <th nowrap >"+JSGantt.msg("jsgantt.begin")+"</th>"}if(r===1){C+="  <th>"+JSGantt.msg("jsgantt.end")+"</th>"}C+='</tr></thead><tbody class="yui-dt-data">';for(var aa=0;aa<c.length;aa++){if(c[aa].getGroup()){vRowType="group"}else{vRowType="row"}J=c[aa].getID();var S=c[aa].getLineColor()?'style="background-color:'+c[aa].getLineColor()+'"':"";if(c[aa].getVisible()===0){C+='<tr id="child_'+J+'" class="g'+vRowType+' hidden" '+S+" onMouseover=\"g.mouseOver(this,'"+J+"','left','"+vRowType+"')\" onMouseout=\"g.mouseOut(this,'"+J+"','left','"+vRowType+"')\">"}else{C+='<tr id="child_'+J+'"  class="g'+vRowType+'" '+S+" onMouseover=\"g.mouseOver(this,'"+J+"','left','"+vRowType+"')\" onMouseout=\"g.mouseOut(this,'"+J+"','left','"+vRowType+"')\">"}if(w===1){C+='<td class="ggtaskCheckbox"><input type="checkbox" id="taskChecked-'+J+'" name="taskChecked" onclick="g.selectItem(this,\''+J+"');\"  "+(JSGantt.scope.selectedItems[J]?' checked="checked">':">")+"</td>"}C+='  <td class="gname nowrap"><span style="color: #aaaaaa">';for(var Z=1;Z<c[aa].getLevel();Z++){C+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"}C+="</span>";if(c[aa].getGroup()){if(c[aa].getOpen()==1){C+='<div id="group_'+J+'" class="gicon ggroup-expanded" onclick="JSGantt.folder(\''+J+"',"+z+");"+z+'.DrawDependencies();"></div>'}else{C+='<div id="group_'+J+'" class="gicon ggroup-collapsed" onclick="JSGantt.folder(\''+J+"',"+z+");"+z+'.DrawDependencies();"></div>'}}else{C+='<span style="color: #000000; font-weight:bold; font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>'}C+='<span class="task-title" > '+c[aa].getName()+"</span></td>";if(u===1){C+="  <td class=gname  ><nobr>"+c[aa].getResource()+"</nobr></td>"}if(n===1){C+="  <td class=gname  ><nobr>"+c[aa].getDuration(b)+"</nobr></td>"}if(t===1){C+="  <td class=gname  ><nobr>"+c[aa].getCompStr()+"</nobr></td>"}if(o===1){C+="  <td class=gname  ><nobr>"+JSGantt.formatDateStr(c[aa].getStart(),i)+"</nobr></td>"}if(r===1){C+="  <td class=gname  ><nobr>"+JSGantt.formatDateStr(c[aa].getEnd(),i)+"</nobr></td>"}C+="</tr>"}C+="</td></tr>";C+="</tbody></table></td>";A+=C+"</div>";X='<div class="scroll yui-u" id="rightside"><table style="width: '+Y+'px;" cellSpacing="0" cellPadding="0" border="0"><thead><tr class="gheader">';E.setFullYear(ab.getFullYear(),ab.getMonth(),ab.getDate());E.setHours(0);E.setMinutes(0);while(E.getTime()<=O.getTime()){Q=E.getFullYear()+"";Q=Q.substring(0,4);if(b=="minute"){X+='<th class="gdatehead"   colspan="60">';X+=JSGantt.formatDateStr(E,i)+" "+E.getHours()+":00 -"+E.getHours()+":59 </th>";E.setHours(E.getHours()+1)}if(b=="hour"){X+='<th class="gdatehead"   colspan="24">';X+=JSGantt.formatDateStr(E,i)+"</th>";E.setDate(E.getDate()+1)}if(b=="day"){X+='<th class="gdatehead"   colspan="7"><center>'+E.getDate()+" - ";E.setDate(E.getDate()+6);X+=JSGantt.formatDateStr(E,i)+"</center></th>";E.setDate(E.getDate()+1)}else{if(b=="week"){X+='<th class="gdatehead"  width='+H+"px><center>"+Q+"</center></th>";E.setDate(E.getDate()+7)}else{if(b=="month"){X+='<th class="gdatehead"  width='+H+"px><center>"+Q+"</center></th>";E.setDate(E.getDate()+1);while(E.getDate()>1){E.setDate(E.getDate()+1)}}else{if(b=="quarter"){X+='<th class="gdatehead"   width='+H+"px><center>"+Q+"</center></th>";E.setDate(E.getDate()+81);while(E.getDate()>1){E.setDate(E.getDate()+1)}}}}}}X+='</tr><tr class="gheader">';E.setFullYear(ab.getFullYear(),ab.getMonth(),ab.getDate());M.setFullYear(ab.getFullYear(),ab.getMonth(),ab.getDate());vNumCols=0;while(E.getTime()<=O.getTime()){var N="ghead",D="";if(b=="minute"){if(E.getMinutes()===0){N="ghead current";T=H*vNumCols}D=E.getMinutes();E.setMinutes(E.getMinutes()+1)}else{if(b=="hour"){if(E.getHours()===0){N="ghead current";T=H*vNumCols}D=E.getHours();E.setHours(E.getHours()+1)}else{if(b=="day"){if(E.getDay()%6===0){N="gheadwkend"}if(JSGantt.formatDateStr(F,"shortDate")==JSGantt.formatDateStr(E,"shortDate")){N+=" current";T=H*vNumCols}D=E.getDate();E.setDate(E.getDate()+1)}else{if(b=="week"){M.setDate(M.getDate()+7);if(F>=E&&F<M){N="ghead current";T=H*vNumCols}D=E.getDate()+"/"+(E.getMonth()+1);E.setDate(E.getDate()+7)}else{if(b=="month"){M.setFullYear(E.getFullYear(),E.getMonth(),x[E.getMonth()]);if(F>=E&&F<M){N="ghead current";T=H*vNumCols}D=y[E.getMonth()].substr(0,3);E.setDate(E.getDate()+1);while(E.getDate()>1){E.setDate(E.getDate()+1)}}else{if(b==="quarter"){M.setDate(M.getDate()+122);if(E.getMonth()===0||E.getMonth()===1||E.getMonth()===2){M.setFullYear(E.getFullYear(),2,31)}else{if(E.getMonth()===3||E.getMonth()===4||E.getMonth()===5){M.setFullYear(E.getFullYear(),5,30)}else{if(E.getMonth()===6||E.getMonth()===7||E.getMonth()===8){M.setFullYear(E.getFullYear(),8,30)}else{if(E.getMonth()===9||E.getMonth()===10||E.getMonth()===11){M.setFullYear(E.getFullYear(),11,31)}}}}if(F>=E&&F<M){N="ghead current";T=H*vNumCols}D=JSGantt.msg("jsgantt.quarter").substr(0,3)+". "+f[E.getMonth()];E.setDate(E.getDate()+81);while(E.getDate()>1){E.setDate(E.getDate()+1)}}}}}}}R+=this.renderDateHeaderCell(N,H,D);I+=this.renderDateCell(N,H);vNumCols++}X+=R+"</tr>";X+="</thead></table>";for(aa=0;aa<c.length;aa++){E.setFullYear(ab.getFullYear(),ab.getMonth(),ab.getDate());vTaskStart=c[aa].getStart();vTaskEnd=c[aa].getEnd();J=c[aa].getID();j=(c[aa].getEnd()-c[aa].getStart())/(24*60*60*1000)+1;if(b=="hour"){j=(c[aa].getEnd()-c[aa].getStart())/(60*1000)+1}else{if(b=="minute"){j=(c[aa].getEnd()-c[aa].getStart())/(60*1000)+1}}if(c[aa].getVisible()===0){X+='<div id="childgrid_'+J+'" style="position:relative;" class="hidden" >'}else{X+='<div id="childgrid_'+J+'" style="position:relative">'}if(b=="minute"){ad=(c[aa].getEnd().getTime()-c[aa].getStart().getTime())/(60*1000)+1/G;P=Math.ceil((c[aa].getStart().getTime()-ab.getTime())/(60*1000))}else{if(b=="hour"){ad=(c[aa].getEnd().getTime()-c[aa].getStart().getTime())/(60*60*1000)+1/G;P=(c[aa].getStart().getTime()-ab.getTime())/(60*60*1000)}else{ad=(c[aa].getEnd().getTime()-c[aa].getStart().getTime())/(24*60*60*1000)+1/G;P=Math.ceil((c[aa].getStart().getTime()-ab.getTime())/(24*60*60*1000))}}if(g.getCaptionType()){vCaptionStr="";switch(g.getCaptionType()){case"Caption":vCaptionStr=c[aa].getCaption();break;case"Resource":vCaptionStr=c[aa].getResource();break;case"Duration":vCaptionStr=c[aa].getDuration(b);break;case"Complete":vCaptionStr=c[aa].getCompStr();break}}var L="row";if(c[aa].getMile()){L="mile"}else{if(c[aa].getGroup()){L="group"}}var S=c[aa].getLineColor()?'style="background-color:'+c[aa].getLineColor()+'"':"";X+='<div><table style="width: '+Y+'px;"><tbody class="yui-dt-data"><tr id="childrow_'+J+'" '+S+' class="g'+L+'" onMouseover="g.mouseOver(this,\''+J+"','right','"+L+"')\" onMouseout=\"g.mouseOut(this,'"+J+"','right','"+L+"')\">"+I+"</tr></tbody></table></div>";if(c[aa].getMile()){R=JSGantt.formatDateStr(vTaskStart,i);X+=this.renderMile(J,P,ad,K,H,R,vCaptionStr,c[aa],b)}else{R=JSGantt.formatDateStr(vTaskStart,i)+" - "+JSGantt.formatDateStr(vTaskEnd,i);if(c[aa].getGroup()){var W=0,V="",U=0,ae="";for(W=aa+1;W<c.length;W++){if(!c[W].getGroup()&&c[W].getMile()&&c[W].getParent()==J){if(b=="minute"){U=Math.ceil((c[W].getStart().getTime()-ab.getTime())/(60*1000))}else{if(b=="hour"){U=(c[W].getStart().getTime()-ab.getTime())/(60*60*1000)}else{U=Math.ceil((c[W].getStart().getTime()-ab.getTime())/(24*60*60*1000))}}ae=JSGantt.formatDateStr(c[W].getStart(),i);if(K<6){U=U-Math.ceil(6/K)}V+='<div style="position:absolute;top:5px; left:'+Math.ceil(U*(K)+1)+"px; z-index:1; background-color:#"+c[W].getColor()+';" title="'+ae+'" class="milestone" >&nbsp;</div>'}}X+=V+this.renderGroup(J,P,ad,K,H,R,vCaptionStr,c[aa],b)}else{X+=this.renderTask(J,P,ad,K,H,R,vCaptionStr,c[aa],b)}}X+="</div></div>"}A+=X+"</div></div>";e.innerHTML=A}this.scrollToY(T)}catch(ac){alert(ac)}};this.renderMile=function(A,C,F,G,E,B,I,D,H){if(G<6){C=C-Math.ceil(6/G)}return'<div id="bardiv_'+A+'" style="position:absolute; top:3px; left:'+Math.ceil(C*(G)+1)+'px; height: 16px; width:266px; overflow:hidden;">  <div id="taskbar_'+A+'" title="'+B+'"  class="milestone '+(D.getCompVal()<100?"":"completed")+'" style="background-color:#'+D.getColor()+';">&nbsp;</div>'+((I!=null&&I.length>0)?'<div class="gcaption" style="top:0px; left:20px">'+I+"</div>":"")};this.renderTask=function(A,C,F,G,E,B,I,D,H){return'<div id="bardiv_'+A+'" style="position:absolute; top:4px; left:'+Math.ceil(C*(G)-1)+"px; height:18px; width:"+Math.ceil((F)*(G)-1)+'px"><div id="taskbar_'+A+'" title="'+B+'" class="gtask" style="background-color:#'+D.getColor()+"; width:"+Math.ceil((F)*(G)-1)+'px;"  ><div class="gcomplete" style="width:'+D.getCompStr()+';"></div></div>'+((I!=null&&I.length>0)?'<div class="gcaption" style="top:-3px; left:'+(Math.ceil((F)*(G)-1)+6)+'px">'+I+"</div>":"")};this.renderGroup=function(A,C,F,G,E,B,I,D,H){return'<div id="bardiv_'+A+'" style="position:absolute; top:8px; left:'+Math.ceil(C*(G)-1)+"px; height: 7px; width:"+Math.ceil((F)*(G)-1)+'px"><div id="taskbar_'+A+'" title="'+B+'" class="ggtask" style="width:'+Math.ceil((F)*(G)-1)+'px;"><div class="ggcomplete" style="width:'+D.getCompStr()+'" ></div></div>'+((I!=null&&I.length>0)?'<div class="gcaption" style="top:-3px; left:'+(Math.ceil((F)*(G)-1)+6)+'px">'+I+"</div>":"")};this.renderDateHeaderCell=function(B,C,A){return'<th class="'+B+'"  ><div style="width: '+C+'px">'+A+"</div></th>"};this.renderDateCell=function(A,B){return'<td class="'+A+'"  ><div style="width: '+B+'px">&nbsp;&nbsp;</div></td>'};this.selectItem=function(A,B){JSGantt.scope.selectedItems[B]=A.checked;YAHOO.Bubbling.fire(JSGantt.scope.scopeId+"selectedItemsChanged")};this.mouseOver=function(D,C,A,B){if(A=="right"){vcurrDivID="child_"+C}else{vcurrDivID="childrow_"+C}Dom.addClass(D,"highlight");Dom.addClass(vcurrDivID,"highlight")};this.mouseOut=function(D,C,A,B){if(A=="right"){vcurrDivID="child_"+C}else{vcurrDivID="childrow_"+C}Dom.removeClass(D,"highlight");Dom.removeClass(vcurrDivID,"highlight")}};JSGantt.processRows=function(d,r,o,e,c){var p=new Date();var f=new Date();var k=0;var m=0;var n=d;var b=e;var h=0;var l=0;var q=0;var j=c;for(h=0;h<d.length;h++){if(d[h].getParent()==r){j=c;d[h].setVisible(j);if(j==1&&d[h].getOpen()===0){j=0}d[h].setLevel(b);l++;if(d[h].getGroup()===1){JSGantt.processRows(n,d[h].getID(),h,b+1,j)}if(k===0||d[h].getStart()<p){p=d[h].getStart();k=1}if(m===0||d[h].getEnd()>f){f=d[h].getEnd();m=1}q+=d[h].getCompVal()}}if(o>=0&&!d[o].getMile()){d[o].setStart(p);d[o].setEnd(f);d[o].setNumKid(l)}};JSGantt.getMinDate=function a(e,d){var c=new Date(),f;c.setFullYear(e[0].getStart().getFullYear(),e[0].getStart().getMonth(),e[0].getStart().getDate());for(var b=0;b<e.length;b++){f=e[b].getStart();if(f.getTime()<c.getTime()){c.setFullYear(e[b].getStart().getFullYear(),e[b].getStart().getMonth(),e[b].getStart().getDate())}}if(d=="minute"){c.setHours(0);c.setMinutes(0)}else{if(d=="hour"){c.setHours(0);c.setMinutes(0)}else{if(d=="day"){c.setDate(c.getDate()-1);while(c.getDay()%7>0){c.setDate(c.getDate()-1)}}else{if(d=="week"){c.setDate(c.getDate()-7);while(c.getDay()%7>0){c.setDate(c.getDate()-1)}}else{if(d=="month"){while(c.getDate()>1){c.setDate(c.getDate()-1)}}else{if(d=="quarter"){if(c.getMonth()===0||c.getMonth()===1||c.getMonth()===2){c.setFullYear(c.getFullYear(),0,1)}else{if(c.getMonth()===3||c.getMonth()===4||c.getMonth()===5){c.setFullYear(c.getFullYear(),3,1)}else{if(c.getMonth()===6||c.getMonth()===7||c.getMonth()===8){c.setFullYear(c.getFullYear(),6,1)}else{if(c.getMonth()===9||c.getMonth()===10||c.getMonth()===11){c.setFullYear(c.getFullYear(),9,1)}}}}}}}}}}return(c)};JSGantt.getMaxDate=function(e,d){var c=new Date();c.setFullYear(e[0].getEnd().getFullYear(),e[0].getEnd().getMonth(),e[0].getEnd().getDate());for(var b=0;b<e.length;b++){if(e[b].getEnd().getTime()>c.getTime()){c.setTime(e[b].getEnd().getTime())}}if(d=="minute"){c.setHours(c.getHours()+1);c.setMinutes(59)}if(d=="hour"){c.setHours(c.getHours()+2)}if(d=="day"){c.setDate(c.getDate()+1);while(c.getDay()%6>0){c.setDate(c.getDate()+1)}}if(d=="week"){c.setDate(c.getDate()+11);while(c.getDay()%6>0){c.setDate(c.getDate()+1)}}if(d=="month"){while(c.getDay()>1){c.setDate(c.getDate()+1)}c.setDate(c.getDate()-1)}if(d=="quarter"){if(c.getMonth()===0||c.getMonth()===1||c.getMonth()===2){c.setFullYear(c.getFullYear(),2,31)}else{if(c.getMonth()===3||c.getMonth()===4||c.getMonth()===5){c.setFullYear(c.getFullYear(),5,30)}else{if(c.getMonth()===6||c.getMonth()===7||c.getMonth()===8){c.setFullYear(c.getFullYear(),8,30)}else{if(c.getMonth()===9||c.getMonth()===10||c.getMonth()===11){c.setFullYear(c.getFullYear(),11,31)}}}}}return(c)};JSGantt.changeFormat=function(b,c){if(c){c.setFormat(b);c.DrawDependencies()}else{alert("Chart undefined")}};JSGantt.folder=function(b,d){var e=d.getList();for(var c=0;c<e.length;c++){if(e[c].getID()==b){if(e[c].getOpen()==1){e[c].setOpen(0);JSGantt.toogleDiv(b,d,0);Dom.removeClass("group_"+b,"ggroup-expanded");Dom.addClass("group_"+b,"ggroup-collapsed")}else{e[c].setOpen(1);JSGantt.toogleDiv(b,d,1);Dom.removeClass("group_"+b,"ggroup-collapsed");Dom.addClass("group_"+b,"ggroup-expanded")}}}};JSGantt.toogleDiv=function(b,e,h){var f=e.getList();var d=0;for(var c=0;c<f.length;c++){if(f[c].getParent()==b){d=f[c].getID();if(h==0){Dom.addClass("child_"+d,"hidden");Dom.addClass("childgrid_"+d,"hidden")}else{Dom.removeClass("child_"+d,"hidden");Dom.removeClass("childgrid_"+d,"hidden")}f[c].setVisible(h);if(f[c].getGroup()==1){JSGantt.toogleDiv(d,e,h)}}}};JSGantt.parseDateStr=function(b,d){if(b===null||b.length<1){return new Date()}if(b instanceof Date){return b}var c=Alfresco.util.fromISO8601(b);if(c===null){return new Date()}return c};JSGantt.formatDateStr=function(b,c){return Alfresco.util.formatDate(b,c)}})();